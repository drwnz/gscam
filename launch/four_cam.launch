<launch>
  <arg name="device0" default="/dev/video0"/>
  <arg name="device1" default="/dev/video1"/>
  <arg name="device2" default="/dev/video2"/>
  <arg name="device3" default="/dev/video3"/>

  <arg name="gpio0" default="51"/>
  <arg name="gpio1" default="52"/>
  <arg name="gpio2" default="53"/>
  <arg name="gpio3" default="54"/>

  <arg name="frame_id0" default="camera0"/>
  <arg name="frame_id1" default="camera1"/>
  <arg name="frame_id2" default="camera2"/>
  <arg name="frame_id3" default="camera3"/>

  <arg name="namespace0" default="$(arg frame_id0)"/>
  <arg name="namespace1" default="$(arg frame_id1)"/>
  <arg name="namespace2" default="$(arg frame_id2)"/>
  <arg name="namespace3" default="$(arg frame_id3)"/>

  <arg name="phase0" default="0"/>
  <arg name="phase1" default="90"/>
  <arg name="phase2" default="180"/>
  <arg name="phase3" default="270"/>

  <arg name="frame_rate" default="10"/>
  <arg name="encoding" default="yuv422"/>

  <node name="gscam_driver_v4l" pkg="gscam_x2" type="gscam_x2" output="screen" ns="$(arg namespace0)">
    <param name="camera_name" value="$(arg frame_id0)"/>
    <param name="frame_id" value="$(arg frame_id0)"/>
    <param name="phase" value="$(arg phase0)"/>
    <param name="gpio" value="$(arg gpio0)"/>

    <param name="camera_info_url" value="package://gscam/examples/uncalibrated_parameters.ini"/>
    <param name="gscam_x2_config" value="v4l2src device=$(arg device0) do-timestamp=true ! video/x-raw, width=1920, height=1280, framerate=30/1, format=UYVY"/>
    <param name="image_encoding" value="$(arg encoding)"/>
    <param name="sync_sink" value="true"/>
    <param name="frame_rate" value="$(arg frame_rate)"/>
  </node>

  <node name="gscam_driver_v4l" pkg="gscam_x2" type="gscam_x2" output="screen" ns="$(arg namespace1)">
    <param name="camera_name" value="$(arg frame_id1)"/>
    <param name="frame_id" value="$(arg frame_id1)"/>
    <param name="phase" value="$(arg phase1)"/>
    <param name="gpio" value="$(arg gpio1)"/>

    <param name="camera_info_url" value="package://gscam/examples/uncalibrated_parameters.ini"/>
    <param name="gscam_x2_config" value="v4l2src device=$(arg device1) do-timestamp=true ! video/x-raw, width=1920, height=1280, framerate=30/1, format=UYVY"/>
    <param name="image_encoding" value="$(arg encoding)"/>
    <param name="sync_sink" value="true"/>
    <param name="frame_rate" value="$(arg frame_rate)"/>
  </node>

  <node name="gscam_driver_v4l" pkg="gscam_x2" type="gscam_x2" output="screen" ns="$(arg namespace2)">
    <param name="camera_name" value="$(arg frame_id2)"/>
    <param name="frame_id" value="$(arg frame_id2)"/>
    <param name="phase" value="$(arg phase2)"/>
    <param name="gpio" value="$(arg gpio2)"/>

    <param name="camera_info_url" value="package://gscam/examples/uncalibrated_parameters.ini"/>
    <param name="gscam_x2_config" value="v4l2src device=$(arg device2) do-timestamp=true ! video/x-raw, width=1920, height=1280, framerate=30/1, format=UYVY"/>
    <param name="image_encoding" value="$(arg encoding)"/>
    <param name="sync_sink" value="true"/>
    <param name="frame_rate" value="$(arg frame_rate)"/>
  </node>

  <node name="gscam_driver_v4l" pkg="gscam_x2" type="gscam_x2" output="screen" ns="$(arg namespace3)">
    <param name="camera_name" value="$(arg frame_id3)"/>
    <param name="frame_id" value="$(arg frame_id3)"/>
    <param name="phase" value="$(arg phase3)"/>
    <param name="gpio" value="$(arg gpio3)"/>

    <param name="camera_info_url" value="package://gscam/examples/uncalibrated_parameters.ini"/>
    <param name="gscam_x2_config" value="v4l2src device=$(arg device3) do-timestamp=true ! video/x-raw, width=1920, height=1280, framerate=30/1, format=UYVY"/>
    <param name="image_encoding" value="$(arg encoding)"/>
    <param name="sync_sink" value="true"/>
    <param name="frame_rate" value="$(arg frame_rate)"/>
  </node>

</launch>
